jQuery(function(){"use strict";function e(){if("undefined"!=typeof data){var n;(n=new ymaps.Map("map",{center:[56.326887,44.005986],zoom:13,controls:[]})).behaviors.disable("scrollZoom"),$(".js-map__zoom").on("click",function(){var e=n.getZoom();$(this).hasClass("_in")?e++:e--,n.setZoom(e,{checkZoomRange:!0,duration:200})});for(var e=ymaps.templateLayoutFactory.createClass('<div class="placemark {{ properties.className }}">\n                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8.202 11.113" class=""><path d="M4.101 11.113c2.734-3.12 4.101-5.442 4.101-6.968C8.202 1.855 6.366 0 4.101 0 1.836 0 0 1.856 0 4.145c0 1.526 1.367 3.849 4.101 6.968z" fill="#fff"></path></svg>\n                    <span><i class="icon-{{ properties.type }}"></i></span>\n                </div>'),a=ymaps.templateLayoutFactory.createClass('<div class="map__balloon {% if properties.logo %}_logo{% endif %}">\n                        {% if properties.logo %}<span class="map__balloon__logo"><img src="{{ properties.logo }}"></span>{% endif %}\n                        <span class="map__balloon__content">\n                            <span class="map__balloon__title">{{ properties.title }}</span>\n                            <span class="map__balloon__address">{{ properties.address }}</span>\n                        </span>\n                    </div>'),t=0,s=data.length;t<s;t++){var o=new ymaps.Placemark(data[t].geo,{idx:t,type:data[t].type,className:"_"+data[t].type,title:data[t].title,address:data[t].address,logo:data[t].logo||null},{iconLayout:e,iconShape:{type:"Rectangle",coordinates:[[-15.5,-42],[15.5,0]]},hideIconOnBalloonOpen:!1,balloonLayout:a,balloonCloseButton:!1});n.geoObjects.add(o),o.events.add("click",function(e){l(e.get("target").properties.get("idx"))})}n.setBounds(n.geoObjects.getBounds()),$(".js-infrastructure__legend__list input").on("change",function(){var e=$(".placemark._"+$(this).data("type"));$(this).prop("checked")?e.show():e.hide(),function(){for(var e=0,a=data.length;e<a;e++){var t=n.geoObjects.get(e);t.balloon.close(),t.properties.set("className","_"+t.properties.get("type"))}}()})}function l(e){for(var a=0,t=data.length;a<t;a++){var s=n.geoObjects.get(a);s.properties.set("className","_"+s.properties.get("type"))}var o=n.geoObjects.get(e);o&&!o.balloon.isOpen()&&o.properties.set("className","_open _"+o.properties.get("type"))}}$(document).ready(function(){$(".js-infrastructure__legend__toggler").on("click",function(e){e.preventDefault();var a=$(this),t=$(".js-infrastructure__legend__list");a.toggleClass("_active"),t.slideToggle(),a.text(a.hasClass("_active")?"Показать легенду":"Скрыть легенду")}),ymaps.ready(e)})});