$(document).ready(function(){app.initialize()});var app={initialized:!1,body:$("body"),initialize:function(){$(".js-hide-empty").each(function(){$(this).find(".js-hide-empty__cnt > *").length||$(this).remove()}),this.initLogo(),this.initPseudoSelect(this.body),this.initPseudoSelectSearch(this.body),this.initScrollbar(),this.initTabs(),this.initMask(),this.initRange(),this.initChess(),this.initChessFilter(),this.initFRPromo(),this.initUp(),this.initJsLink(),this.initialized=!0},initJsLink:function(){$(".js-link").each(function(){var e=$(this).data("href"),t=$(this).data("target");e&&$(this).on("click",function(){window.open(e,t||"_self")})})},initUp:function(){var e=$(".js-up");if(e.length){var t=$(window).outerHeight()/2;$(window).on("scroll",function(){$(this).scrollTop()>t?e.addClass("_active"):e.removeClass("_active")}),e.on("click",function(){$("html, body").animate({scrollTop:0},500)})}},initLogo:function(){var e=appConfig.logoUpdateTimeout||3e3,t=$(".js-logo"),i=t.data("newsrc"),s=$("<img>");s.attr("src",i),s.on("load",function(){setTimeout(function(){t.parent().css("width",t.outerWidth()),t.fadeOut(function(){t.attr("src",s.attr("src")),t.fadeIn(function(){t.parent().css("width","auto")})})},e)})},initPseudoSelect:function(e){e.find(".js-select").on("click",function(e){e.stopPropagation()}),e.find(".js-select__toggler").on("click",function(){$(".js-select").removeClass("_active"),$(this).parents(".js-select").addClass("_active").toggleClass("_opened"),$(".js-select").not("._active").removeClass("_opened")}),app.initialized||$(window).on("click",function(){$(".js-select").removeClass("_opened _active")})},initPseudoSelectSearch:function(e){e.find(".js-select-search").each(function(e,t){var i=$(t).find(".js-select-search__item");$(t).find(".js-select-search__input").on("keyup",function(){var e=$(this).val().trim().toLowerCase();e.length?i.each(function(){-1!=$(this).data("select-search").toLowerCase().indexOf(e)?$(this).show():$(this).hide()}):i.show()}).on("change",function(){return!1})})},initScrollbar:function(){$(".js-scrollbar").scrollbar();var e=$(window).outerWidth();e<appConfig.breakpoint.md&&($(".js-scrollbar-sm").scrollbar(),$(".js-scrollbar-sm-md").scrollbar()),e<appConfig.breakpoint.lg&&$(".js-scrollbar-sm-md").scrollbar(),e>=appConfig.breakpoint.md&&e<appConfig.breakpoint.lg&&$(".js-scrollbar-md").scrollbar(),e>=appConfig.breakpoint.md&&$(".js-scrollbar-md-lg").scrollbar(),e>=appConfig.breakpoint.lg&&$(".js-scrollbar-lg").scrollbar(),$(window).on("resize",function(){$(window).outerWidth()<appConfig.breakpoint.md?$(".js-scrollbar-sm").scrollbar():$(".js-scrollbar-sm").scrollbar("destroy"),$(window).outerWidth()>=appConfig.breakpoint.md&&$(window).outerWidth()<appConfig.breakpoint.lg?$(".js-scrollbar-md").scrollbar():$(".js-scrollbar-md").scrollbar("destroy"),e<appConfig.breakpoint.lg?$(".js-scrollbar-sm-md").scrollbar():$(".js-scrollbar-sm-md").scrollbar("destroy"),$(window).outerWidth()>=appConfig.breakpoint.md?$(".js-scrollbar-md-lg").scrollbar():$(".js-scrollbar-md-lg").scrollbar("destroy"),$(window).outerWidth()>=appConfig.breakpoint.lg?$(".js-scrollbar-lg").scrollbar():$(".js-scrollbar-lg").scrollbar("destroy")})},initTabs:function(){$(".js-tabs").each(function(e,t){var i=void 0===$(t).data("tabs")?".js-tabs__list > li":$(t).data("tabs"),a=$(t).find(".js-tabs__select"),n=a.length;$(t).easytabs({tabs:i,panelContext:$(t).hasClass("js-tabs_disconnected")?$(".js-tabs__content"):$(t),updateHash:!1}),n&&($(t).find(i).find("a, [data-href]").each(function(){var e=$(this).attr("href")||$(this).data("href"),t=$(this).data("select")||$(this).text();a.append('<option value="'+e+'">'+t+"</option>")}),a.on("change",function(){$(t).easytabs("select",$(this).val())})),$(t).find(i).find("a:not(.disabled), [data-href]:not(.disabled)").first().click(),$(t).bind("easytabs:after",function(e,t,i){if(n){var s=t.attr("href")||t.data("href");a.val(s).change()}i.find(".slick-initialized").slick("setPosition"),i.find(".js-select2").select2()})})},initMask:function(){$(".js-mask__tel").inputmask({mask:"+9 (999) 999-99-99"}),Inputmask.extendAliases({numeric:{autoUnmask:!0,showMaskOnHover:!1,radixPoint:",",groupSeparator:" ",digits:0,allowMinus:!1,autoGroup:!0,rightAlign:!1,unmaskAsNumber:!0}}),$(".js-mask__numeric").inputmask("numeric"),$(".js-mask__currency").inputmask("numeric",{suffix:" руб."}),$(".js-mask__square").inputmask("numeric",{suffix:" м²"}),$(".js-mask__square_filter").inputmask("numeric",{suffix:" м²",unmaskAsNumber:!1}),$(".js-mask__currency_filter").inputmask("numeric",{suffix:" руб.",unmaskAsNumber:!1}),$(".js-mask__age").inputmask("numeric",{suffix:" лет"}),$(".js-mask__percent").inputmask("numeric",{suffix:"%"}),$(".js-mask__currency, .js-mask__square, .js-mask__percent").on("blur",function(){var e=$(this).val();0!=e&&""!=e||$(this).val("")})},initRange:function(){$(".js-range").each(function(e,t){var i=$(t).find(".js-range__target")[0],s=$(t).find("input"),a=s.first()[0],n=s.last()[0];if(i&&a&&n){var r=parseInt(a.value)||0,o=parseInt(n.value)||0;noUiSlider.create(i,{start:[r,o],connect:!0,range:{min:r,max:o}});var l=[a,n];i.noUiSlider.on("update",function(e,t){l[t].value=Math.round(e[t])}),a.addEventListener("change",function(){i.noUiSlider.set([this.value,null])}),n.addEventListener("change",function(){i.noUiSlider.set([null,this.value])}),$(t).hasClass("js-chess-range")&&i.noUiSlider.on("end",function(e,t){$('[name="price_max"]').trigger("change")})}}),$(".js-picker").each(function(e,i){var s=$(i).find(".js-picker__target")[0],a=$(i).find(".js-picker__input")[0];if(s&&a){var t=parseInt(a.getAttribute("min"))||0,n=parseInt(a.getAttribute("max"))||0,r=parseInt(a.value)||t;noUiSlider.create(s,{start:r,connect:[!0,!1],range:{min:t,max:n}}),s.noUiSlider.on("update",function(){a.value=s.noUiSlider.get(),$(i).find(".js-picker__input").trigger("change");var e=a.inputmask;if(e&&a.classList.contains("js-mask__age")){var t=app.getNumEnding(parseInt(s.noUiSlider.get()),[" год"," года"," лет"]);e.option({suffix:t})}}),a.addEventListener("change",function(){s.noUiSlider.set(this.value)})}})},chessSelectFlat:function(e,t){var i=e,s={cnt:$(".js-chess-info"),title:$(".js-chess-info__title"),area:$(".js-chess-info__area"),price:$(".js-chess-info__price"),pricePerSquare:$(".js-chess-info__pricePerSquare"),floor:$(".js-chess-info__floor"),floorsTotal:$(".js-chess-info__floorsTotal")},a=$(".js-chess-info__hypothec"),n=$(".js-chess-info__hypothec-wrapper"),r=$(".js-chess-info__price-wrapper"),o=$(".js-chess-info__pricePerSquare-wrapper"),l=$(".js-chess-info__imgFlat"),c=$(".js-chess-info__imgFloor"),d=$(".js-chess-info__tabs"),h=$(".js-chess-info__tabFloor"),f=$(".js-chess-info__tabFlat"),p=$(".js-chess-info__form");$(".js-chess-info__item").removeClass("_selected"),i.addClass("_selected");var u=i.data();for(var _ in s)s[_].text(u[_]);if(p.val(u.form),u.hypothec?(a.text(u.hypothec),n.show()):n.hide(),0!=u.price?r.show():r.hide(),0!=u.pricePerSquare?o.show():o.hide(),0<$(".js-hypothec__cost").length&&($(".js-hypothec__cost").val(u.filterPrice).trigger("change"),$(".js-hypothec__payment-sum").val(u.filterPrice/2).trigger("change")),u.imgFlat?(l.attr("href",u.imgFlat),l.find("img").attr("src",u.imgFlat),l.show(),f.show()):(l.hide(),f.hide()),u.imgFloor?(c.attr("href",u.imgFloor),c.find("img").attr("src",u.imgFloor),c.show(),h.show()):(c.hide(),h.hide()),1==d.find("li:visible").length&&d.find("li:visible").first().find("a").click(),t){var g=s.cnt.offset().top;s.cnt.outerHeight()<=$(window).outerHeight()&&(g-=$(window).outerHeight()-s.cnt.outerHeight()),$("html, body").animate({scrollTop:g},500)}},initChess:function(){$(window).outerWidth()>=appConfig.breakpoint.lg&&$(".js-chess-tooltip__content").parent().hover(app.showChessTooltip,app.hideChessTooltip),$(".js-chess-info__item._active").on("click",function(){app.chessSelectFlat($(this),!0)}),$(".js-chess-info__item._active").first().click()},$chessTooltip:null,$chessTooltipTimeout:null,showChessTooltip:function(){var t=$(this);app.$chessTooltipTimeout=setTimeout(function(){var e=t.offset();app.$chessTooltip=t.find(".js-chess-tooltip__content").clone(),app.$chessTooltip.css({top:e.top+28,left:e.left+10}).appendTo($("body")).addClass("_active")},300)},hideChessTooltip:function(){clearTimeout(app.$chessTooltipTimeout),app.$chessTooltip.remove()},initChessFilter:function(){function i(){"undefined"!=typeof mSearch2&&$(".js-chess__link").on("click",function(){var e=$.param(mSearch2.getFilters());return window.open($(this).attr("href")+"?"+e,"_blank"),!1})}i(),$(document).on("mse2_load",function(e,t){i()});var s=$(".js-chess-filter"),a=$(".js-chess-filter__item"),n=null,r=null,o=null,l=null,e=s.find('[name="price_min"]').parents(".js-range").find(".js-range__target")[0],t=s.find('[name="area_min"]').parents(".js-range").find(".js-range__target")[0],c=a.length-a.filter("._sold").length;if(0!==s.length&&0!==a.length){this.setChessTotal(c),a.filter("[data-filter-area]").each(function(){var e=parseFloat($(this).data("filter-area"));(!n||e<n)&&(n=Math.floor(e)),(!r||r<e)&&(r=Math.ceil(e))}),a.filter("[data-filter-price]").each(function(){var e=parseInt($(this).data("filter-price"));(!o||e<o)&&(o=e),(!l||l<e)&&(l=e)}),s.find('[name="area_min"]').attr("value",n).attr("min",n).attr("max",r),s.find('[name="area_max"]').attr("value",r).attr("min",n).attr("max",r),s.find('[name="price_min"]').attr("value",o).attr("min",o).attr("max",l),s.find('[name="price_max"]').attr("value",l).attr("min",o).attr("max",l),s.find('[name="rooms"]').each(function(){0===a.filter('[data-filter-rooms="'+$(this).val()+'"]').length&&$(this).parent().remove()}),e.noUiSlider.updateOptions({start:[o,l],range:{min:o,max:l}},!0),t.noUiSlider.updateOptions({start:[n,r],range:{min:n,max:r}},!0),s.find("input").on("change",function(){a.removeClass("_selected");var e=s.serializeArray(),i={area:[n,r],price:[o,l],rooms:[]};$.each(e,function(e,t){"area_min"==t.name&&t.value!=n&&(i.area[0]=parseInt(t.value)),"area_max"==t.name&&t.value!=r&&(i.area[1]=parseInt(t.value)),"price_min"==t.name&&t.value!=o&&(i.price[0]=parseInt(t.value)),"price_max"==t.name&&t.value!=l&&(i.price[1]=parseInt(t.value)),"rooms"==t.name&&i.rooms.push(t.value)}),i.area[0]==n&&i.area[1]==r&&delete i.area,i.price[0]==o&&i.price[1]==l&&delete i.price,0==i.rooms.length&&delete i.rooms,Object.keys(i).length?(a.addClass("_filtered"),a.each(function(){var a=!0,n=$(this);$.each(i,function(e,t){switch(e){case"area":if(void 0!==n.data("filter-area")){var i=Math.round(parseFloat(n.data("filter-area")));(i<t[0]||i>t[1])&&(a=!1)}else a=!1;break;case"price":if(void 0!==n.data("filter-price")&&""!==n.data("filter-price")){var s=Math.round(parseFloat(n.data("filter-price")));(s<t[0]||s>t[1])&&(a=!1)}else a=!1;break;case"rooms":void 0!==n.data("filter-rooms")&&-1!==t.indexOf(n.data("filter-rooms").toString())||(a=!1)}}),a&&$(this).removeClass("_filtered")}),app.setChessTotal(a.length-a.filter("._filtered").length)):(a.removeClass("_filtered"),app.setChessTotal(c));var t=a.filter("._active:not(._filtered)");t.length&&app.chessSelectFlat(t.first(),!1)});var d,h,f={};if((h=decodeURIComponent(window.location.search.substr(1))).length){for(var p in h=h.split("&"))h.hasOwnProperty(p)&&void 0!==(d=h[p].split("="))[1]&&(f[d[0]]=d[1]);if(0!==f.length){if(void 0!==f.komnatnye){var u=f.komnatnye.split(",");$.each(u,function(e,t){var i=s.find('[name="rooms"]').filter('[value="'+t+'"]');i&&i.prop("checked",!0)})}if(void 0!==f["appchessresidential|area"]){var _=f["appchessresidential|area"].split(",");t.noUiSlider.set(_)}if(void 0!==f["appchessresidential|price"]){var g=f["appchessresidential|price"].split(",");e.noUiSlider.set(g)}s.find('[name="rooms"]').trigger("change")}}}},setChessTotal:function(e){$(".js-chess-filter__total").text(e+" "+app.getNumEnding(e,["квартира","квартиры","квартир"]))},initFRPromo:function(){var e=$(".js-fr");e.length&&$(".js-fr__toggler").on("click",function(){e.toggleClass("_active")})},getNumEnding:function(e,t){var i;if(11<=(e%=100)&&e<=19)i=t[2];else switch(e%10){case 1:i=t[0];break;case 2:case 3:case 4:i=t[1];break;default:i=t[2]}return i}};jQuery(function(){"use strict";function e(){$(window).outerWidth()<appConfig.breakpoint.md?$(".js-slider-small:not(.slick-initialized)").slick({dots:!0,arrows:!1,infinite:!0,slidesToShow:1,slidesToScroll:1,centerMode:!0,centerPadding:"15px",focusOnSelect:!0}):$(".js-slider-small.slick-initialized").slick("unslick"),$(window).outerWidth()<appConfig.breakpoint.md?($(".js-agents-slider .agents-slider__item").off("click"),$(".js-agents-slider:not(.slick-initialized)").slick({dots:!1,arrows:!1,infinite:!0,slidesToShow:1,slidesToScroll:1,centerMode:!0,centerPadding:"25%",focusOnSelect:!0}),$(".js-agents-slider").on("afterChange",function(e,t,i){$(this).find("._active").removeClass("_active"),$(t.$slides[i]).addClass("_active"),n()})):($(".js-agents-slider.slick-initialized").slick("unslick"),t())}function t(){$(window).outerWidth()>=appConfig.breakpoint.md&&$(".js-agents-slider .agents-slider__item").on("click",function(){$(this).parent().find("._active").removeClass("_active"),$(this).addClass("_active"),n()})}function n(){if($(".js-agents-slider").length){var e=$(".js-agents-slider ._active .js-agents-slider__short"),t=$(".js-agents-slider__full");t.find(".js-agents-slider__full__img").attr("src",e.data("agent-img")),t.find(".js-agents-slider__full__name").text(e.data("agent-name"));var i=e.data("agent-phone");t.find(".js-agents-slider__full__phone a").text(i.replace(/^(\+7)(\d{3})(\d{3})(\d{2})(\d{2})/,"$1 ($2) $3-$4-$5")).attr("href","tel:"+i.replace(/[-\s()]/g,""));var s=e.data("agent-mail");t.find(".js-agents-slider__full__mail a").text(s).attr("href","mailto:"+s);var a=e.data("agent-url");t.find(".js-agents-slider__full__url a").attr("href",a),$(".js-agents-slider__url").attr("href",a)}}function r(){function e(){$(".js-reviews__outer").each(function(){$(this).find(".js-reviews__inner").outerHeight()<=$(this).outerHeight()?$(this).parents(".js-reviews").removeClass("_fade"):$(this).parents(".js-reviews").addClass("_fade")})}$(".js-reviews__toggler, .js-reviews__outer").on("click",function(){!function(e){if(e.hasClass("_fade")){var t=e.find(".js-reviews__toggler"),i=null;if(e.hasClass("_opened"))i=e.data("height"),t.text(t.data("rolldown")),e.animate({height:i},400,function(){e.removeClass("_opened"),e.css("height","")});else{var s=e.parent().height(e.outerHeight()),a=e.clone().addClass("_cloned").width(e.outerWidth()).appendTo(s);i=a.outerHeight(),a.remove(),e.data("height",e.outerHeight()),e.addClass("_opened"),e.animate({height:i},400,function(){t.text(t.data("rollup"))})}}}($(this).parents(".js-reviews"))}),$(window).on("resize",function(){$(".js-reviews").removeClass("_opened").css("height",""),$(".js-reviews__toggler").each(function(){$(this).text($(this).data("rolldown"))}),e()}),e(),$(".js-reviews").each(function(){var e=$(this).find(".js-reviews__slide");e.on("click",function(){return $.fancybox.open(e,{loop:!0},e.index(this)),!1})})}function o(e,t){var i;if(11<=(e%=100)&&e<=19)i=t[2];else switch(e%10){case 1:i=t[0];break;case 2:case 3:case 4:i=t[1];break;default:i=t[2]}return i}$(document).ready(function(){var l,s,i,a;l=appConfig.sliderAutoplaySpeed/1e3,$(".js-slider-main").each(function(){var a,e,n=$(this).find(".js-slider-main__bar"),t=$(this).find(".js-slider-main__slider"),i=!1;if(0!==t.length){var s=t.find(".slide").length;t.slick({dots:1<s,arrows:!1,infinite:!0,slidesToShow:1,slidesToScroll:1,fade:!0,adaptiveHeight:!0,speed:appConfig.sliderFadeSpeed}),1!==s?(t.on("beforeChange",function(e,t,i,s){i<s?($(t.$slides[i]).addClass("_fade _left"),$(t.$slides[s]).addClass("_fade _right")):($(t.$slides[i]).addClass("_fade _right"),$(t.$slides[s]).addClass("_fade _left")),clearTimeout(a),n.animate({width:"0%"},100)}),t.on("afterChange",function(e,t,i){$(t.$slides[i]).removeClass("_fade _left _right"),r()}),t.on({mouseenter:function(){i=!0},mouseleave:function(){i=!1}}),r()):n.parent().remove()}function r(){n.css({width:"0%"}),clearTimeout(a),e=0,a=setInterval(o,10)}function o(){!1===i&&(e+=1/(l+.1),n.css({width:e+"%"}),100<=e&&t.slick("slickNext"))}}),e(),function(){var e=$(".js-slider-reviews");e.slick({dots:!0,arrows:!1,infinite:!0,slidesToShow:3,focusOnSelect:!0,adaptiveHeight:!0,dotsClass:"slick-dots _big",responsive:[{breakpoint:appConfig.breakpoint.lg,settings:{slidesToShow:1}}]});var a=$(".reviews__list._big .reviews__list__item"),n=0;a.length&&e.length&&(s(),e.on("beforeChange",function(e,t,i,s){i!=s&&a.fadeOut().empty(),n=i}).on("afterChange",function(e,t,i){i!=n&&s()}));function s(){$(".js-slider-reviews .slick-current .reviews__list__item__inner").clone().appendTo(a),a.fadeIn(),a.parent().css("height",a.outerHeight(!0))}}(),t(),n(),$(".js-menu-toggler").on("click",function(e){e.preventDefault();var t=$(this).attr("href");t?$('.js-menu-toggler[href="'+t+'"]').toggleClass("_active"):(t=$(this).data("href"),$('.js-menu-toggler[data-href="'+t+'"]').toggleClass("_active")),$(t).toggleClass("_active"),$(".js-menu._active").length?($(".js-menu-overlay").show(),$("body").addClass("menu-opened")):($(".js-menu-overlay").hide(),$("body").removeClass("menu-opened"))}),$(".js-menu-overlay").on("click",function(e){$(".js-menu-toggler, .js-menu").removeClass("_active"),$(this).hide()}),$(".js-menu-second-toggler").on("click",function(e){e.preventDefault(),$(this).toggleClass("_active"),$(".js-menu-second").toggleClass("_active")}),function(){var n={baseClass:"_popup",autoFocus:!1,btnTpl:{smallBtn:'<span data-fancybox-close class="fancybox-close-small"><span class="link">Закрыть</span></span>'},touch:!1};if($(".js-popup").on("click",function(){$.fancybox.close();var e=$(this).attr("href")||$(this).data("href");if(e){var t=$("#"+e.substr(1)),i=$(this).data();if(t.length&&i)for(var s in i){var a=t.find('[name="'+s+'"]');a.length&&a.val(i[s])}}return $.fancybox.open(t,n),!1}),window.location.hash){var e=$(window.location.hash);e.length&&e.hasClass("popup-cnt")&&$.fancybox.open(e,n)}}(),$.fn.select2.defaults.set("theme","custom"),$.fn.select2.defaults.set("minimumResultsForSearch",1/0),$(".js-select2").select2(),$(window).on("resize",function(){$(".js-select2").select2()}),$(".js-agent-search").select2({theme:"agents",width:"100%",language:{inputTooShort:function(e){return"Пожалуйста, введите "+(e.minimum-e.input.length)+" или больше символов"}},ajax:{url:"https://api.myjson.com/bins/okyvi",dataType:"json",delay:250,data:function(e){return{q:e.term,action:"agent_search"}},processResults:function(e){var t=$.map(e,function(e,t){return{id:t,text:e.pagetitle,agent:e}});return{results:t}},cache:!0},templateResult:function(e){return e.loading?"поиск…":'<div class="select2-result-agent"><strong>'+e.agent.pagetitle+"</strong><br>"+e.agent.value+"</div>"},templateSelection:function(e){return e.agent.pagetitle},escapeMarkup:function(e){return e},minimumInputLength:3,maximumSelectionLength:1}),$(".js-agent-search").on("select2:select",function(e){var t=e.params.data;window.location=t.agent.uri}),function(){$.validator.addMethod("phone",function(e,t){return this.optional(t)||/^\+\d\s\(\d{3}\)\s\d{3}-\d{2}-\d{2}$/.test(e)},"Please specify a valid mobile number");var e={errorPlacement:function(e,t){},rules:{phone:"phone"}};$(".js-validate").each(function(){$(this).validate(e)})}(),$(".js-filters-realty-type").on("click",function(){$(".js-filters-realty-title").text($(this).data("filters-title"))}),function(){function s(){$('.js-realty-list-slider[data-init="false"]').each(function(){var t=$(this).find(".js-realty-list-slider__img-wrapper"),i=$(this).find(".js-realty-list-slider__counter");t.each(function(e){$(this).on("mouseover",function(){t.removeClass("_active"),$(this).addClass("_active"),i.text(e+1)})}),$(this).data("init","true")})}s(),$(document).on("pdopage_load",function(e,t,i){s()}),$(document).on("mse2_load",function(e,t){s()})}(),s=/[!@#$%^&~]/,$(".js-password").on("keyup",function(){var e=$(this).val().trim(),t=$(this).siblings(".input-help"),i=0;t.removeClass("_0 _1 _2 _3"),e.length&&(e.length>=appConfig.minPasswordLength&&(i=1,10<=e.length&&-1!==e.search(/\d/)&&-1!==e.search(/\D/)&&(i=2,12<=e.length&&-1!==e.search(/[A-Z]/)&&-1!==e.search(s)&&(i=3))),t.addClass("_"+i))}),$(".js-password").keyup(),$(".js-gallery-nav").slick({lazyLoad:"ondemand",dots:!1,arrows:!0,infinite:!1,slidesToShow:6,slidesToScroll:1,focusOnSelect:!0,asNavFor:".js-gallery__slider",responsive:[{breakpoint:appConfig.breakpoint.md,settings:{slidesToShow:3}}]}),$(".js-gallery").each(function(e,t){var i=$(t).find(".js-gallery__slider"),s=$(t).find(".js-gallery__current");i.slick({lazyLoad:"ondemand",dots:!1,arrows:!0,infinite:!0,swipeToSlide:!0,touchThreshold:10,asNavFor:".js-gallery-nav",responsive:[{breakpoint:appConfig.breakpoint.md,settings:{arrows:!1}}]}),i.on("afterChange",function(e,t,i){s.text(++i)});var a=i.find(".slide:not(.slick-cloned)");$(t).find(".js-gallery__total").text(a.length),a.on("click",function(){return $.fancybox.open(a,{loop:!0},a.index(this)),!1})}),function(){var m=[];if($(".js-hypothec").each(function(){var e=$(this).find(".js-hypothec__cost"),i=e.val(),s=$(this).find(".js-hypothec__payment-percent"),a=$(this).find(".js-hypothec__payment-sum"),t=$(this).find(".js-picker__target")[0],n=$(this).find(".js-hypothec__age"),r=$(this).find(".js-hypothec__credit"),o=$(this).find(".js-hypothec__slider"),l=$(this).find(".js-hypothec__item"),c=$(this).find(".js-hypothec__scroll"),d=$(this).find(".js-hypothec__show-target"),h=[];l.each(function(){h.push(parseFloat($(this).find(".js-hypothec__rate").text().replace(",","."))||0)});var f=[];l.each(function(){f.push(parseFloat($(this).find(".js-hypothec__rateME").text().replace(",","."))||0)});var p,u=0,_=n.val();function g(){i=$(this).val(),a.prop("max",i),t.noUiSlider.updateOptions({range:{min:0,max:i}}),t.noUiSlider.set(i/2),a.trigger("change")}e.inputmask("numeric",{suffix:" руб.",oncomplete:g}),e.on("change",g),a.on("change",function(){var e,t;100<(p=100*$(this).val()/i)&&(p=100,$(this).val(i)),t=p,u=(e=i)-Math.ceil(e*t/100),s.val(p).trigger("change"),r.val(u).trigger("change"),l.each(function(e,t){$(t).find(".js-hypothec__first").text(j(a.val())),$(t).find(".js-hypothec__permonth").text(j(v(u,h[e],_))),$(t).find(".js-hypothec__permonthME").text(j(v(u,f[e],_))),$(t).find(".js-hypothec__economy").text(j(12*v(u,h[e],_)*_-12*v(u,f[e],_)*_))})}),a.inputmask("numeric",{suffix:" руб.",oncomplete:function(){$(this).parents(".js-picker").find(".js-picker__target")[0].noUiSlider.set($(this).val())}}),a.trigger("change"),n.on("change",function(){_=n.val(),l.each(function(e,t){$(t).find(".js-hypothec__permonth").text(j(v(u,h[e],_))),$(t).find(".js-hypothec__permonthME").text(j(v(u,f[e],_))),$(t).find(".js-hypothec__economy").text(j(12*v(u,h[e],_)*_-12*v(u,f[e],_)*_))})}),c.find(".hypothec-list__item").each(function(t){$(this).find(".hypothec-list__item__inner").on("click",function(e){e.preventDefault(),console.log(t),o.slick("slickGoTo",t)})}),$(this).find(".js-hypothec__filter").each(function(){var i="filter-"+$(this).data("hypothec-filter");m.push("."+i+"{display:none !important}");var s=$(this).find("input[type=checkbox]");s.on("change",function(){var e=s.filter(":checked");if(e.length){l.removeClass(i);var t=[];e.each(function(){t.push(":not([data-filter-"+$(this).val()+"])")}),l.filter(".js-hypothec__item"+t.join("")).addClass(i)}else l.removeClass(i);k(d,l)})}),s.on("change",function(){var e=parseInt($(this).val()),t="filter-first";l.filter("[data-filter-first]").each(function(){parseInt($(this).data("filter-first"))>e?$(this).addClass(t):$(this).removeClass(t)})}).trigger("change"),r.on("change",function(){var e=parseInt($(this).val()),t="filter-min";l.filter("[data-filter-min]").each(function(){parseInt($(this).data("filter-min"))>e?$(this).addClass(t):$(this).removeClass(t)}),k(d,l)}).trigger("change"),m.push(".filter-minyear{display:none !important}"),m.push(".filter-maxyear{display:none !important}"),n.on("change",function(){var e=parseInt($(this).val());l.filter("[data-filter-minyear]").each(function(){parseInt($(this).data("filter-minyear"))>e?$(this).addClass("filter-minyear"):$(this).removeClass("filter-minyear")}),l.filter("[data-filter-maxyear]").each(function(){parseInt($(this).data("filter-maxyear"))<e?$(this).addClass("filter-maxyear"):$(this).removeClass("filter-maxyear")}),k(d,l)}).trigger("change")}),m.length){var i=[];$.each(m,function(e,t){-1===$.inArray(t,i)&&i.push(t)}),$("<style>"+i.join("")+"</style>").appendTo("head")}function v(e,t,i){return Math.ceil(e*(t/1200/(1-Math.pow(1+t/1200,-12*i))))}function j(e){return e.toString().replace(/./g,function(e,t,i){return!t||"."===e||(i.length-t)%3?e:" "+e})}function k(e,t){var i=t.length-t.filter('[class*="filter"]').length,s=o(i,["Найдена","Найдено","Найдено"]),a=o(i,["ипотечная программа","ипотечные программы","ипотечных программ"]);e.text([s,i,a].join(" "))}$(".js-hypothec__slider").slick({dots:!0,arrows:!1,infinite:!0,slidesToShow:1,slidesToScroll:1,centerMode:!0,centerPadding:"15px",focusOnSelect:!0,mobileFirst:!0,responsive:[{breakpoint:appConfig.breakpoint.md-1,settings:{dots:!1,fade:!0,draggable:!1,centerPadding:"0px"}}]}),$(".js-hypothec__show-btn").on("click",function(e){e.preventDefault();var t=$(this).parents(".js-hypothec").find(".js-hypothec__show-target");if(t.length){var i=t.offset().top-40;"fixed"===$(".header__main").css("position")&&(i-=$(".header__main").outerHeight(!0)),$("html, body").animate({scrollTop:i},300)}})}(),i=!1,a={position:"top left",onShow:function(e,t){t&&(i=!0)},onHide:function(e,t){t&&(i=!1)},onSelect:function(e,t,i){i.$el.trigger("change")}},$(".js-datetimepicker").datepicker(Object.assign({minDate:new Date,timepicker:!0,dateTimeSeparator:", "},a)),$(".js-datepicker-range").each(function(e){var t=new Date($(this).data("min"))||null,i=new Date($(this).data("max"))||new Date;$(this).datepicker(Object.assign({minDate:t,maxDate:i,range:!0,multipleDatesSeparator:" - "},a));var s=$(this).data("datepicker");s.selectDate([t,i])}),$(".js-datetimepicker, .js-datepicker-range").on("click",function(){if(i){var e=$(".js-datetimepicker, .js-datepicker-range").data("datepicker");e.hide()}}),$(".js-scroll").on("click",function(e){e.preventDefault();var t=$($(this).attr("href"));if(t.length){var i=t.offset().top-40;"fixed"===$(".header__main").css("position")&&(i-=$(".header__main").outerHeight(!0)),"fixed"===$(".header").css("position")&&(i-=$(".header").outerHeight()),$("html,body").animate({scrollTop:i},300)}}),$(".js-about-hystory__year-slider").slick({dots:!1,arrows:!1,infinite:!0,slidesToShow:5,slidesToScroll:1,centerMode:!0,vertical:!0,centerPadding:"50px",asNavFor:".js-about-hystory__content-slider",focusOnSelect:!0,mobileFirst:!0,responsive:[{breakpoint:appConfig.breakpoint.md-1,settings:{centerPadding:"70px"}}]}),$(".js-about-hystory__year-slider").on("beforeChange",function(e,t,i,s){$(this).find("._sibling").removeClass("_sibling"),$(t.$slides[s]).next().addClass("_sibling"),$(t.$slides[s]).prev().addClass("_sibling")}),$(".js-about-hystory__content-slider").slick({dots:!1,arrows:!1,infinite:!0,slidesToShow:1,slidesToScroll:1,fade:!0,asNavFor:".js-about-hystory__year-slider",adaptiveHeight:!0,draggable:!1}),$(".js-fileinput__cnt").each(function(){$(this).data("default",$(this).text())}),$(".js-fileinput").on("change",function(e){if(this.files){var t=$(this).val().split("\\").pop();$(this).parent().find(".js-fileinput__cnt").text(t)}}),$(".js-alphabet input").on("change",function(){$(".js-alphabet li").removeClass("_active"),$(this).prop("checked")&&$(this).parents("li").addClass("_active")}),$(".js-alphabet a").on("click",function(e){e.preventDefault(),$(".js-alphabet li").removeClass("_active"),$(this).parents("li").addClass("_active"),"undefined"!=typeof mSearch2&&mSearch2.reset()}),setTimeout(function(){$('input[name="email3"],input[name="info"],input[name="text"]').attr("value","").val("")},5e3),r()}),$(window).on("resize",function(){e()}),$(document).on("pdopage_load",function(e,t,i){r()})});