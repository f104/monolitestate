$(document).ready(function(){app.initialize()});var app={initialized:!1,initialize:function(){$(".js-hide-empty").each(function(){$(this).find(".js-hide-empty__cnt > *").length||$(this).remove()}),this.initLogo(),this.initPseudoSelect(),this.initPseudoSelectSearch(),this.initTabs(),this.initRange(),this.initChess(),this.initChessFilter(),this.initFRPromo(),this.initialized=!0},initLogo:function(){var e=appConfig.logoUpdateTimeout||3e3,t=$(".js-logo"),i=t.data("newsrc"),a=$("<img>");a.attr("src",i),a.on("load",function(){setTimeout(function(){t.parent().css("width",t.outerWidth()),t.fadeOut(function(){t.attr("src",a.attr("src")),t.fadeIn(function(){t.parent().css("width","auto")})})},e)})},initPseudoSelect:function(){$(".js-select").on("click",function(e){e.stopPropagation()}),$(".js-select__toggler").on("click",function(){$(".js-select").removeClass("_active"),$(this).parents(".js-select").addClass("_active").toggleClass("_opened"),$(".js-select").not("._active").removeClass("_opened")}),$(window).on("click",function(){$(".js-select").removeClass("_opened _active")})},initPseudoSelectSearch:function(){$(".js-select-search").each(function(e,t){var i=$(t).find(".js-select-search__item");$(t).find(".js-select-search__input").on("keyup",function(){var e=$(this).val().trim().toLowerCase();e.length?i.each(function(){-1!=$(this).data("select-search").toLowerCase().indexOf(e)?$(this).show():$(this).hide()}):i.show()}).on("change",function(){return!1})})},initTabs:function(){$(".js-tabs").each(function(e,t){var i=void 0===$(t).data("tabs")?".js-tabs__list > li":$(t).data("tabs"),a=$(t).find(".js-tabs__select"),s=a.length;$(t).easytabs({tabs:i,panelContext:$(t).hasClass("js-tabs_disconnected")?$(".js-tabs__content"):$(t),updateHash:!1}),s&&($(t).find(i).find("a").each(function(){var e=$(this).attr("href"),t=$(this).data("select")||$(this).text();a.append('<option value="'+e+'">'+t+"</option>")}),a.on("change",function(){$(t).easytabs("select",$(this).val())})),$(t).find(i).find("a:not(.disabled)").first().click(),$(t).bind("easytabs:after",function(e,t,i){s&&a.val(t.attr("href")).change(),i.find(".slick-initialized").slick("setPosition"),i.find(".js-select2").select2()})})},initRange:function(){$(".js-range").each(function(e,t){var i=$(t).find(".js-range__target")[0],a=$(t).find("input"),s=a.first()[0],n=a.last()[0];if(i&&s&&n){var r=parseInt(s.value)||0,o=parseInt(n.value)||0;noUiSlider.create(i,{start:[r,o],connect:!0,range:{min:r,max:o}});var l=[s,n];i.noUiSlider.on("update",function(e,t){l[t].value=Math.round(e[t])}),s.addEventListener("change",function(){i.noUiSlider.set([this.value,null])}),n.addEventListener("change",function(){i.noUiSlider.set([null,this.value])}),$(t).hasClass("js-chess-range")&&i.noUiSlider.on("end",function(e,t){$('[name="price_max"]').trigger("change")})}}),$(".js-picker").each(function(e,i){var a=$(i).find(".js-picker__target")[0],s=$(i).find(".js-picker__input")[0];if(a&&s){var t=parseInt(s.getAttribute("min"))||0,n=parseInt(s.getAttribute("max"))||0,r=parseInt(s.value)||t;noUiSlider.create(a,{start:r,connect:[!0,!1],range:{min:t,max:n}}),a.noUiSlider.on("update",function(){s.value=a.noUiSlider.get(),$(i).find(".js-picker__input").trigger("change");var e=s.inputmask;if(e&&s.classList.contains("js-mask__age")){var t=app.getNumEnding(parseInt(a.noUiSlider.get()),[" год"," года"," лет"]);e.option({suffix:t})}}),s.addEventListener("change",function(){a.noUiSlider.set(this.value)})}})},initChess:function(){$(window).outerWidth()>=appConfig.breakpoint.lg&&$(".js-chess-tooltip__content").parent().hover(app.showChessTooltip,app.hideChessTooltip);var a={title:$(".js-chess-info__title"),area:$(".js-chess-info__area"),price:$(".js-chess-info__price"),pricePerSquare:$(".js-chess-info__pricePerSquare"),floor:$(".js-chess-info__floor"),floorsTotal:$(".js-chess-info__floorsTotal")},s=$(".js-chess-info__hypothec"),n=$(".js-chess-info__hypothec-wrapper"),r=$(".js-chess-info__imgFlat"),o=$(".js-chess-info__imgFloor"),l=$(".js-chess-info__tabs"),c=$(".js-chess-info__tabFloor"),d=$(".js-chess-info__tabFlat"),h=$(".js-chess-info__form"),f=!1;$(".js-chess-info__item._active").on("click",function(){var e=$(this);if(!e.hasClass("_selected")){$(".js-chess-info__item").removeClass("_selected"),e.addClass("_selected");var t=e.data();for(var i in a)a[i].text(t[i]);h.val(t.form),t.hypothec?(s.text(t.hypothec),n.show()):n.hide(),0<$(".js-hypothec__cost").length&&($(".js-hypothec__cost").val(t.filterPrice).trigger("change"),$(".js-hypothec__payment-sum").val(t.filterPrice/2).trigger("change")),t.imgFlat?(r.attr("href",t.imgFlat),r.find("img").attr("src",t.imgFlat),r.show(),d.show()):(r.hide(),d.hide()),t.imgFloor?(o.attr("href",t.imgFloor),o.find("img").attr("src",t.imgFloor),o.show(),c.show()):(o.hide(),c.hide()),1==l.find("li:visible").length&&l.find("li:visible").first().find("a").click(),f&&$("html, body").animate({scrollTop:a.title.offset().top-100},500)}}),$(".js-chess-info__item._active").first().click(),f=!0},$chessTooltip:null,$chessTooltipTimeout:null,showChessTooltip:function(){var t=$(this);app.$chessTooltipTimeout=setTimeout(function(){var e=t.offset();app.$chessTooltip=t.find(".js-chess-tooltip__content").clone(),app.$chessTooltip.css({top:e.top+28,left:e.left+10}).appendTo($("body")).addClass("_active")},300)},hideChessTooltip:function(){clearTimeout(app.$chessTooltipTimeout),app.$chessTooltip.remove()},initChessFilter:function(){function i(){"undefined"!=typeof mSearch2&&$(".js-chess__link").on("click",function(){var e=$.param(mSearch2.getFilters());return window.open($(this).attr("href")+"?"+e,"_blank"),!1})}i(),$(document).on("mse2_load",function(e,t){i()});var a=$(".js-chess-filter"),t=$(".js-chess-filter__item"),s=null,n=null,r=null,o=null,e=a.find('[name="price_min"]').parents(".js-range").find(".js-range__target")[0],l=a.find('[name="area_min"]').parents(".js-range").find(".js-range__target")[0],c=t.length-t.filter("._sold").length;if(0!==a.length&&0!==t.length){this.setChessTotal(c),t.filter("[data-filter-area]").each(function(){var e=parseFloat($(this).data("filter-area"));(!s||e<s)&&(s=Math.floor(e)),(!n||n<e)&&(n=Math.ceil(e))}),t.filter("[data-filter-price]").each(function(){var e=parseInt($(this).data("filter-price"));(!r||e<r)&&(r=e),(!o||o<e)&&(o=e)}),a.find('[name="area_min"]').attr("value",s).attr("min",s).attr("max",n),a.find('[name="area_max"]').attr("value",n).attr("min",s).attr("max",n),a.find('[name="price_min"]').attr("value",r).attr("min",r).attr("max",o),a.find('[name="price_max"]').attr("value",o).attr("min",r).attr("max",o),a.find('[name="rooms"]').each(function(){0===t.filter('[data-filter-rooms="'+$(this).val()+'"]').length&&$(this).parent().remove()}),e.noUiSlider.updateOptions({start:[r,o],range:{min:r,max:o}},!0),l.noUiSlider.updateOptions({start:[s,n],range:{min:s,max:n}},!0),a.find("input").on("change",function(){var e=a.serializeArray(),i={area:[s,n],price:[r,o],rooms:[]};$.each(e,function(e,t){"area_min"==t.name&&t.value!=s&&(i.area[0]=parseInt(t.value)),"area_max"==t.name&&t.value!=n&&(i.area[1]=parseInt(t.value)),"price_min"==t.name&&t.value!=r&&(i.price[0]=parseInt(t.value)),"price_max"==t.name&&t.value!=o&&(i.price[1]=parseInt(t.value)),"rooms"==t.name&&i.rooms.push(t.value)}),i.area[0]==s&&i.area[1]==n&&delete i.area,i.price[0]==r&&i.price[1]==o&&delete i.price,0==i.rooms.length&&delete i.rooms,Object.keys(i).length?(t.addClass("_filtered"),t.each(function(){var s=!0,n=$(this);$.each(i,function(e,t){switch(e){case"area":if(void 0!==n.data("filter-area")){var i=Math.round(parseFloat(n.data("filter-area")));(i<t[0]||i>t[1])&&(s=!1)}else s=!1;break;case"price":if(void 0!==n.data("filter-price")&&""!==n.data("filter-price")){var a=Math.round(parseFloat(n.data("filter-price")));(a<t[0]||a>t[1])&&(s=!1)}else s=!1;break;case"rooms":void 0!==n.data("filter-rooms")&&-1!==t.indexOf(n.data("filter-rooms").toString())||(s=!1)}}),s&&$(this).removeClass("_filtered")}),app.setChessTotal(t.length-t.filter("._filtered").length)):(t.removeClass("_filtered"),app.setChessTotal(c))});var d,h,f={};if((h=decodeURIComponent(window.location.search.substr(1))).length){for(var p in h=h.split("&"))h.hasOwnProperty(p)&&void 0!==(d=h[p].split("="))[1]&&(f[d[0]]=d[1]);if(0!==f.length){if(void 0!==f.komnatnye){var u=f.komnatnye.split(",");$.each(u,function(e,t){var i=a.find('[name="rooms"]').filter('[value="'+t+'"]');i&&i.prop("checked",!0)})}if(void 0!==f["appchessresidential|area"]){var m=f["appchessresidential|area"].split(",");l.noUiSlider.set(m)}if(void 0!==f["appchessresidential|price"]){var _=f["appchessresidential|price"].split(",");e.noUiSlider.set(_)}a.find('[name="rooms"]').trigger("change")}}}},setChessTotal:function(e){$(".js-chess-filter__total").text(e+" "+app.getNumEnding(e,["квартира","квартиры","квартир"]))},initFRPromo:function(){var e=$(".js-fr");e.length&&$(".js-fr__toggler").on("click",function(){e.toggleClass("_active")})},getNumEnding:function(e,t){var i;if(11<=(e%=100)&&e<=19)i=t[2];else switch(e%10){case 1:i=t[0];break;case 2:case 3:case 4:i=t[1];break;default:i=t[2]}return i}};jQuery(function(){"use strict";function e(){$(window).outerWidth()<appConfig.breakpoint.md?$(".js-slider-small:not(.slick-initialized)").slick({dots:!0,arrows:!1,infinite:!0,slidesToShow:1,slidesToScroll:1,centerMode:!0,centerPadding:"15px",focusOnSelect:!0}):$(".js-slider-small.slick-initialized").slick("unslick"),$(window).outerWidth()<appConfig.breakpoint.md?($(".js-agents-slider .agents-slider__item").off("click"),$(".js-agents-slider:not(.slick-initialized)").slick({dots:!1,arrows:!1,infinite:!0,slidesToShow:1,slidesToScroll:1,centerMode:!0,centerPadding:"25%",focusOnSelect:!0}),$(".js-agents-slider").on("afterChange",function(e,t,i){$(this).find("._active").removeClass("_active"),$(t.$slides[i]).addClass("_active"),n()})):($(".js-agents-slider.slick-initialized").slick("unslick"),t())}function t(){$(window).outerWidth()>=appConfig.breakpoint.md&&$(".js-agents-slider .agents-slider__item").on("click",function(){$(this).parent().find("._active").removeClass("_active"),$(this).addClass("_active"),n()})}function n(){if($(".js-agents-slider").length){var e=$(".js-agents-slider ._active .js-agents-slider__short"),t=$(".js-agents-slider__full");t.find(".js-agents-slider__full__img").attr("src",e.data("agent-img")),t.find(".js-agents-slider__full__name").text(e.data("agent-name"));var i=e.data("agent-phone");t.find(".js-agents-slider__full__phone a").text(i).attr("href","tel:"+i.replace(/[-\s()]/g,""));var a=e.data("agent-mail");t.find(".js-agents-slider__full__mail a").text(a).attr("href","mailto:"+a);var s=e.data("agent-url");t.find(".js-agents-slider__full__url a").attr("href",s),$(".js-agents-slider__url").attr("href",s)}}function r(e,t){var i;if(11<=(e%=100)&&e<=19)i=t[2];else switch(e%10){case 1:i=t[0];break;case 2:case 3:case 4:i=t[1];break;default:i=t[2]}return i}$(document).ready(function(){var l,a,i,s;l=appConfig.sliderAutoplaySpeed/1e3,$(".js-slider-main").each(function(){var s,e,n=$(this).find(".js-slider-main__bar"),t=$(this).find(".js-slider-main__slider"),i=!1;if(0!==t.length){var a=t.find(".slide").length;t.slick({dots:1<a,arrows:!1,infinite:!0,slidesToShow:1,slidesToScroll:1,fade:!0,adaptiveHeight:!0,speed:appConfig.sliderFadeSpeed}),1!==a?(t.on("beforeChange",function(e,t,i,a){i<a?($(t.$slides[i]).addClass("_fade _left"),$(t.$slides[a]).addClass("_fade _right")):($(t.$slides[i]).addClass("_fade _right"),$(t.$slides[a]).addClass("_fade _left")),clearTimeout(s),n.animate({width:"0%"},100)}),t.on("afterChange",function(e,t,i){$(t.$slides[i]).removeClass("_fade _left _right"),r()}),t.on({mouseenter:function(){i=!0},mouseleave:function(){i=!1}}),r()):n.parent().remove()}function r(){n.css({width:"0%"}),clearTimeout(s),e=0,s=setInterval(o,10)}function o(){!1===i&&(e+=1/(l+.1),n.css({width:e+"%"}),100<=e&&t.slick("slickNext"))}}),e(),function(){var e=$(".js-slider-reviews");e.slick({dots:!0,arrows:!1,infinite:!0,slidesToShow:3,focusOnSelect:!0,adaptiveHeight:!0,dotsClass:"slick-dots _big",responsive:[{breakpoint:appConfig.breakpoint.lg,settings:{slidesToShow:1}}]});var s=$(".reviews__list._big .reviews__list__item"),n=0;s.length&&e.length&&(a(),e.on("beforeChange",function(e,t,i,a){i!=a&&s.fadeOut().empty(),n=i}).on("afterChange",function(e,t,i){i!=n&&a()}));function a(){$(".js-slider-reviews .slick-current .reviews__list__item__inner").clone().appendTo(s),s.fadeIn(),s.parent().css("height",s.outerHeight(!0))}}(),t(),n(),$(".js-menu-toggler").on("click",function(e){e.preventDefault();var t=$(this).attr("href");t?$('.js-menu-toggler[href="'+t+'"]').toggleClass("_active"):(t=$(this).data("href"),$('.js-menu-toggler[data-href="'+t+'"]').toggleClass("_active")),$(t).toggleClass("_active"),$(".js-menu._active").length?($(".js-menu-overlay").show(),$("body").addClass("menu-opened")):($(".js-menu-overlay").hide(),$("body").removeClass("menu-opened"))}),$(".js-menu-overlay").on("click",function(e){$(".js-menu-toggler, .js-menu").removeClass("_active"),$(this).hide()}),$(".js-menu-second-toggler").on("click",function(e){e.preventDefault(),$(this).toggleClass("_active"),$(".js-menu-second").toggleClass("_active")}),$(".js-mask__tel").inputmask({mask:"+9 (999) 999-99-99"}),Inputmask.extendAliases({numeric:{autoUnmask:!0,showMaskOnHover:!1,radixPoint:",",groupSeparator:" ",digits:0,allowMinus:!1,autoGroup:!0,rightAlign:!1,unmaskAsNumber:!0}}),$(".js-mask__numeric").inputmask("numeric"),$(".js-mask__currency").inputmask("numeric",{suffix:" руб."}),$(".js-mask__square").inputmask("numeric",{suffix:" м²"}),$(".js-mask__square_filter").inputmask("numeric",{suffix:" м²",unmaskAsNumber:!1}),$(".js-mask__currency_filter").inputmask("numeric",{suffix:" руб.",unmaskAsNumber:!1}),$(".js-mask__age").inputmask("numeric",{suffix:" лет"}),$(".js-mask__percent").inputmask("numeric",{suffix:"%"}),$(".js-mask__currency, .js-mask__square, .js-mask__percent").on("blur",function(){var e=$(this).val();0!=e&&""!=e||$(this).val("")}),function(){var e={baseClass:"_popup",autoFocus:!1,btnTpl:{smallBtn:'<span data-fancybox-close class="fancybox-close-small"><span class="link">Закрыть</span></span>'},touch:!1};if($(".js-popup").on("click",function(){if($.fancybox.close(),$(this).attr("href")){var e=$("#"+$(this).attr("href").substr(1)),t=$(this).data();if(e.length&&t)for(var i in t){var a=e.find('[name="'+i+'"]');a.length&&a.val(t[i])}}}).fancybox(e),window.location.hash){var t=$(window.location.hash);t.length&&t.hasClass("popup-cnt")&&$.fancybox.open(t,e)}}(),$.fn.select2.defaults.set("theme","custom"),$.fn.select2.defaults.set("minimumResultsForSearch",1/0),$(".js-select2").select2(),$(window).on("resize",function(){$(".js-select2").select2()}),$(".js-agent-search").select2({theme:"agents",width:"100%",language:{inputTooShort:function(e){return"Пожалуйста, введите "+(e.minimum-e.input.length)+" или больше символов"}},ajax:{url:"https://api.myjson.com/bins/okyvi",dataType:"json",delay:250,data:function(e){return{q:e.term,action:"agent_search"}},processResults:function(e){var t=$.map(e,function(e,t){return{id:t,text:e.pagetitle,agent:e}});return{results:t}},cache:!0},templateResult:function(e){return e.loading?"поиск…":'<div class="select2-result-agent"><strong>'+e.agent.pagetitle+"</strong><br>"+e.agent.value+"</div>"},templateSelection:function(e){return e.agent.pagetitle},escapeMarkup:function(e){return e},minimumInputLength:3,maximumSelectionLength:1}),$(".js-agent-search").on("select2:select",function(e){var t=e.params.data;window.location=t.agent.uri}),function(){$.validator.addMethod("phone",function(e,t){return this.optional(t)||/^\+\d\s\(\d{3}\)\s\d{3}-\d{2}-\d{2}$/.test(e)},"Please specify a valid mobile number");var e={errorPlacement:function(e,t){},rules:{phone:"phone"}};$(".js-validate").each(function(){$(this).validate(e)})}(),$(".js-filters-realty-type").on("click",function(){$(".js-filters-realty-title").text($(this).data("filters-title"))}),function(){function a(){$('.js-realty-list-slider[data-init="false"]').each(function(){var t=$(this).find(".js-realty-list-slider__img-wrapper"),i=$(this).find(".js-realty-list-slider__counter");t.each(function(e){$(this).on("mouseover",function(){t.removeClass("_active"),$(this).addClass("_active"),i.text(e+1)})}),$(this).data("init","true")})}a(),$(document).on("pdopage_load",function(e,t,i){a()}),$(document).on("mse2_load",function(e,t){a()})}(),a=/[!@#$%^&~]/,$(".js-password").on("keyup",function(){var e=$(this).val().trim(),t=$(this).siblings(".input-help"),i=0;t.removeClass("_0 _1 _2 _3"),e.length&&(e.length>=appConfig.minPasswordLength&&(i=1,10<=e.length&&-1!==e.search(/\d/)&&-1!==e.search(/\D/)&&(i=2,12<=e.length&&-1!==e.search(/[A-Z]/)&&-1!==e.search(a)&&(i=3))),t.addClass("_"+i))}),$(".js-password").keyup(),$(".js-gallery-nav").slick({lazyLoad:"ondemand",dots:!1,arrows:!0,infinite:!1,slidesToShow:6,slidesToScroll:1,focusOnSelect:!0,asNavFor:".js-gallery__slider",responsive:[{breakpoint:appConfig.breakpoint.md,settings:{slidesToShow:3}}]}),$(".js-gallery").each(function(e,t){var i=$(t).find(".js-gallery__slider"),a=$(t).find(".js-gallery__current");i.slick({lazyLoad:"ondemand",dots:!1,arrows:!0,infinite:!0,swipeToSlide:!0,asNavFor:".js-gallery-nav",responsive:[{breakpoint:appConfig.breakpoint.md,settings:{arrows:!1}}]}),i.on("afterChange",function(e,t,i){a.text(++i)});var s=i.find(".slide:not(.slick-cloned)");$(t).find(".js-gallery__total").text(s.length),s.on("click",function(){return $.fancybox.open(s,{loop:!0},s.index(this)),!1})}),function(){var g=[];if($(".js-hypothec").each(function(){var e=$(this).find(".js-hypothec__cost"),i=e.val(),a=$(this).find(".js-hypothec__payment-percent"),s=$(this).find(".js-hypothec__payment-sum"),t=$(this).find(".js-picker__target")[0],n=$(this).find(".js-hypothec__age"),r=$(this).find(".js-hypothec__credit"),o=$(this).find(".js-hypothec__slider"),l=$(this).find(".js-hypothec__item"),c=$(this).find(".js-hypothec__scroll"),d=$(this).find(".js-hypothec__show-target"),h=[];l.each(function(){h.push(parseFloat($(this).find(".js-hypothec__rate").text().replace(",","."))||0)});var f=[];l.each(function(){f.push(parseFloat($(this).find(".js-hypothec__rateME").text().replace(",","."))||0)});var p,u=0,m=n.val();function _(){i=$(this).val(),s.prop("max",i),t.noUiSlider.updateOptions({range:{min:0,max:i}}),t.noUiSlider.set(i/2),s.trigger("change")}e.inputmask("numeric",{suffix:" руб.",oncomplete:_}),e.on("change",_),s.on("change",function(){var e,t;100<(p=100*$(this).val()/i)&&(p=100,$(this).val(i)),t=p,u=(e=i)-Math.ceil(e*t/100),a.val(p).trigger("change"),r.val(u).trigger("change"),l.each(function(e,t){$(t).find(".js-hypothec__first").text(j(s.val())),$(t).find(".js-hypothec__permonth").text(j(v(u,h[e],m))),$(t).find(".js-hypothec__permonthME").text(j(v(u,f[e],m))),$(t).find(".js-hypothec__economy").text(j(12*v(u,h[e],m)*m-12*v(u,f[e],m)*m))})}),s.inputmask("numeric",{suffix:" руб.",oncomplete:function(){$(this).parents(".js-picker").find(".js-picker__target")[0].noUiSlider.set($(this).val())}}),s.trigger("change"),n.on("change",function(){m=n.val(),l.each(function(e,t){$(t).find(".js-hypothec__permonth").text(j(v(u,h[e],m))),$(t).find(".js-hypothec__permonthME").text(j(v(u,f[e],m))),$(t).find(".js-hypothec__economy").text(j(12*v(u,h[e],m)*m-12*v(u,f[e],m)*m))})}),c.find(".hypothec__list__item").each(function(t){$(this).find(".hypothec__list__item__inner").on("click",function(e){e.preventDefault(),o.slick("slickGoTo",t)})}),$(this).find(".js-hypothec__filter").each(function(){var i="filter-"+$(this).data("hypothec-filter");g.push("."+i+"{display:none !important}");var a=$(this).find("input[type=checkbox]");a.on("change",function(){var e=a.filter(":checked");if(e.length){l.removeClass(i);var t=[];e.each(function(){t.push(":not([data-filter-"+$(this).val()+"])")}),l.filter(".js-hypothec__item"+t.join("")).addClass(i)}else l.removeClass(i);k(d,l)})}),a.on("change",function(){var e=parseInt($(this).val()),t="filter-first";l.filter("[data-filter-first]").each(function(){parseInt($(this).data("filter-first"))>e?$(this).addClass(t):$(this).removeClass(t)})}).trigger("change"),r.on("change",function(){var e=parseInt($(this).val()),t="filter-min";l.filter("[data-filter-min]").each(function(){parseInt($(this).data("filter-min"))>e?$(this).addClass(t):$(this).removeClass(t)}),k(d,l)}).trigger("change"),g.push(".filter-minyear{display:none !important}"),g.push(".filter-maxyear{display:none !important}"),n.on("change",function(){var e=parseInt($(this).val());l.filter("[data-filter-minyear]").each(function(){parseInt($(this).data("filter-minyear"))>e?$(this).addClass("filter-minyear"):$(this).removeClass("filter-minyear")}),l.filter("[data-filter-maxyear]").each(function(){parseInt($(this).data("filter-maxyear"))<e?$(this).addClass("filter-maxyear"):$(this).removeClass("filter-maxyear")}),k(d,l)}).trigger("change")}),g.length){var i=[];$.each(g,function(e,t){-1===$.inArray(t,i)&&i.push(t)}),$("<style>"+i.join("")+"</style>").appendTo("head")}function v(e,t,i){return Math.ceil(e*(t/1200/(1-Math.pow(1+t/1200,-12*i))))}function j(e){return e.toString().replace(/./g,function(e,t,i){return!t||"."===e||(i.length-t)%3?e:" "+e})}function k(e,t){var i=t.length-t.filter('[class*="filter"]').length,a=r(i,["Найдена","Найдено","Найдено"]),s=r(i,["ипотечная программа","ипотечные программы","ипотечных программ"]);e.text([a,i,s].join(" "))}$(".js-hypothec__slider").slick({dots:!0,arrows:!1,infinite:!0,slidesToShow:1,slidesToScroll:1,centerMode:!0,centerPadding:"15px",focusOnSelect:!0,mobileFirst:!0,responsive:[{breakpoint:appConfig.breakpoint.md-1,settings:{dots:!1,fade:!0,draggable:!1,centerPadding:"0px"}}]}),$(".js-hypothec__show-btn").on("click",function(e){e.preventDefault();var t=$(this).parents(".js-hypothec").find(".js-hypothec__show-target");if(t.length){var i=t.offset().top-40;"fixed"===$(".header__main").css("position")&&(i-=$(".header__main").outerHeight(!0)),$("html, body").animate({scrollTop:i},300)}})}(),i=!1,s={position:"top left",onShow:function(e,t){t&&(i=!0)},onHide:function(e,t){t&&(i=!1)},onSelect:function(e,t,i){i.$el.trigger("change")}},$(".js-datetimepicker").datepicker(Object.assign({minDate:new Date,timepicker:!0,dateTimeSeparator:", "},s)),$(".js-datepicker-range").each(function(e){var t=new Date($(this).data("min"))||null,i=new Date($(this).data("max"))||new Date;$(this).datepicker(Object.assign({minDate:t,maxDate:i,range:!0,multipleDatesSeparator:" - "},s));var a=$(this).data("datepicker");a.selectDate([t,i])}),$(".js-datetimepicker, .js-datepicker-range").on("click",function(){if(i){var e=$(".js-datetimepicker, .js-datepicker-range").data("datepicker");e.hide()}}),function(){$(".js-scrollbar").scrollbar();var e=$(window).outerWidth();e<appConfig.breakpoint.md&&($(".js-scrollbar-sm").scrollbar(),$(".js-scrollbar-sm-md").scrollbar());e<appConfig.breakpoint.lg&&$(".js-scrollbar-sm-md").scrollbar();e>=appConfig.breakpoint.md&&e<appConfig.breakpoint.lg&&$(".js-scrollbar-md").scrollbar();e>=appConfig.breakpoint.md&&$(".js-scrollbar-md-lg").scrollbar();e>=appConfig.breakpoint.lg&&$(".js-scrollbar-lg").scrollbar();$(window).on("resize",function(){$(window).outerWidth()<appConfig.breakpoint.md?$(".js-scrollbar-sm").scrollbar():$(".js-scrollbar-sm").scrollbar("destroy"),$(window).outerWidth()>=appConfig.breakpoint.md&&$(window).outerWidth()<appConfig.breakpoint.lg?$(".js-scrollbar-md").scrollbar():$(".js-scrollbar-md").scrollbar("destroy"),e<appConfig.breakpoint.lg?$(".js-scrollbar-sm-md").scrollbar():$(".js-scrollbar-sm-md").scrollbar("destroy"),$(window).outerWidth()>=appConfig.breakpoint.md?$(".js-scrollbar-md-lg").scrollbar():$(".js-scrollbar-md-lg").scrollbar("destroy"),$(window).outerWidth()>=appConfig.breakpoint.lg?$(".js-scrollbar-lg").scrollbar():$(".js-scrollbar-lg").scrollbar("destroy")})}(),$(".js-scroll").on("click",function(e){e.preventDefault();var t=$($(this).attr("href"));if(t.length){var i=t.offset().top-40;"fixed"===$(".header__main").css("position")&&(i-=$(".header__main").outerHeight(!0)),"fixed"===$(".header").css("position")&&(i-=$(".header").outerHeight()),$("html,body").animate({scrollTop:i},300)}}),$(".js-about-hystory__year-slider").slick({dots:!1,arrows:!1,infinite:!0,slidesToShow:5,slidesToScroll:1,centerMode:!0,vertical:!0,centerPadding:"50px",asNavFor:".js-about-hystory__content-slider",focusOnSelect:!0,mobileFirst:!0,responsive:[{breakpoint:appConfig.breakpoint.md-1,settings:{centerPadding:"70px"}}]}),$(".js-about-hystory__year-slider").on("beforeChange",function(e,t,i,a){$(this).find("._sibling").removeClass("_sibling"),$(t.$slides[a]).next().addClass("_sibling"),$(t.$slides[a]).prev().addClass("_sibling")}),$(".js-about-hystory__content-slider").slick({dots:!1,arrows:!1,infinite:!0,slidesToShow:1,slidesToScroll:1,fade:!0,asNavFor:".js-about-hystory__year-slider",adaptiveHeight:!0,draggable:!1}),$(".js-fileinput__cnt").each(function(){$(this).data("default",$(this).text())}),$(".js-fileinput").on("change",function(e){if(this.files){var t=$(this).val().split("\\").pop();$(this).parent().find(".js-fileinput__cnt").text(t)}}),$(".js-alphabet input").on("change",function(){$(".js-alphabet li").removeClass("_active"),$(this).prop("checked")&&$(this).parents("li").addClass("_active")}),$(".js-alphabet a").on("click",function(e){e.preventDefault(),$(".js-alphabet li").removeClass("_active"),$(this).parents("li").addClass("_active"),"undefined"!=typeof mSearch2&&mSearch2.reset()}),setTimeout(function(){$('input[name="email3"],input[name="info"],input[name="text"]').attr("value","").val("")},5e3)}),$(window).on("resize",function(){e()})});